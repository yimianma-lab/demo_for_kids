<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>From Idea to Physics Demo</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 40px 24px 60px;
      background: #f5f5f5;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      font-size: 1.25rem;
      font-weight: 500;
      letter-spacing: 0.02em;
      margin: 0 0 32px;
      color: #444;
    }
    #canvas-wrap {
      margin-bottom: 32px;
    }
    canvas {
      display: block;
      background: #fff;
      border-radius: 2px;
    }
    .readout {
      font-size: 0.8rem;
      color: #555;
      margin-bottom: 24px;
      letter-spacing: 0.02em;
    }
    .readout span {
      margin-right: 20px;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
      max-width: 360px;
      width: 100%;
    }
    .control-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .control-row label {
      font-size: 0.8rem;
      color: #555;
      min-width: 100px;
    }
    .control-row input[type="range"] {
      flex: 1;
      height: 6px;
      -webkit-appearance: none;
      appearance: none;
      background: #ddd;
      border-radius: 3px;
    }
    .control-row input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      background: #5a6b7a;
      border-radius: 50%;
      cursor: pointer;
    }
    .control-row .value {
      font-size: 0.75rem;
      color: #666;
      min-width: 36px;
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 8px;
    }
    button {
      font-size: 0.85rem;
      padding: 10px 24px;
      border: none;
      border-radius: 2px;
      cursor: pointer;
      font-family: inherit;
    }
    #btn-start {
      background: #5a6b7a;
      color: #fff;
    }
    #btn-start:hover {
      background: #4a5b6a;
    }
    #btn-reset {
      background: transparent;
      color: #555;
    }
    #btn-reset:hover {
      background: #e8e8e8;
      color: #333;
    }
    #btn-super {
      background: #c45c26;
      color: #fff;
    }
    #btn-super:hover {
      background: #a84d1f;
    }
    .control-row label {
      min-width: 0;
    }
  </style>
</head>
<body>
  <h1>From Idea to Physics Demo (‰ªéÊÉ≥Ê≥ïÂà∞Áâ©ÁêÜÂ∞èÂÆûÈ™å)</h1>
  <div id="canvas-wrap">
    <canvas id="canvas" width="640" height="360"></canvas>
  </div>
  <div class="readout">
    <span id="speed-text">Speed: 0.00 m/s (ÈÄüÂ∫¶)</span>
    <span id="distance-text">Distance: 0.00 m (Ë∑ùÁ¶ª)</span>
  </div>
  <div class="controls">
    <div class="control-row">
      <label for="slope">How steep is the hill? (Â±±Âù°ÊúâÂ§öÈô°Ôºü)</label>
      <input type="range" id="slope" min="5" max="45" value="20" step="1">
      <span class="value" id="slope-val">20¬∞</span>
    </div>
    <div class="control-row">
      <label for="friction">How slippery is the ground? (Âú∞Èù¢ÊúâÂ§öÊªëÔºü)</label>
      <input type="range" id="friction" min="0.01" max="0.5" value="0.15" step="0.01">
      <span class="value" id="friction-val">0.15</span>
    </div>
    <div class="control-row">
      <label for="height">How high does the car start? (Â∞èËΩ¶‰ªéÂ§öÈ´òÂºÄÂßãÔºü)</label>
      <input type="range" id="height" min="20" max="120" value="60" step="2">
      <span class="value" id="height-val">60 m</span>
    </div>
    <div class="buttons">
      <button id="btn-start">Start (ÂºÄÂßã)</button>
      <button id="btn-reset">Reset (ÈáçÁΩÆ)</button>
      <button id="btn-super">Super Slide üöÄ (Ë∂ÖÁ∫ßÊªëÈÅì üöÄ)</button>
    </div>
  </div>

  <script>
    (function () {
      const g = 9.8;
      const VISUAL_TIME_SCALE = 5;  // makes motion look faster, physics unchanged
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const cw = canvas.width;
      const ch = canvas.height;

      // State
      let slopeAngleDeg = 20;
      let mu = 0.15;
      let startHeight = 60;
      let running = false;
      let s = 0;           // distance along path (m)
      let v = 0;           // velocity along path (m/s)
      let totalDistance = 0;
      let lastTime = 0;

      // DOM
      const slopeInput = document.getElementById('slope');
      const frictionInput = document.getElementById('friction');
      const heightInput = document.getElementById('height');
      const slopeVal = document.getElementById('slope-val');
      const frictionVal = document.getElementById('friction-val');
      const heightVal = document.getElementById('height-val');
      const speedText = document.getElementById('speed-text');
      const distanceText = document.getElementById('distance-text');
      const btnStart = document.getElementById('btn-start');
      const btnReset = document.getElementById('btn-reset');

      function getSlopeLength() {
        const theta = (slopeAngleDeg * Math.PI) / 180;
        return startHeight / Math.sin(theta);
      }

      function getSlopeEndX() {
        const theta = (slopeAngleDeg * Math.PI) / 180;
        return startHeight / Math.tan(theta);
      }

      function pathToScreen(sVal) {
        const theta = (slopeAngleDeg * Math.PI) / 180;
        const slopeLen = getSlopeLength();
        const slopeEndX = getSlopeEndX();
        const margin = 80;
        const groundY = ch - 60;
        const scale = Math.min((cw - 2 * margin) / (slopeEndX + 80), (ch - margin - 80) / (startHeight + 40));
        const ox = margin;
        const oy = groundY;

        if (sVal <= slopeLen) {
          const x = sVal * Math.cos(theta);
          const y = -(startHeight - sVal * Math.sin(theta));
          return { x: ox + x * scale, y: oy + y * scale };
        } else {
          const x = slopeEndX + (sVal - slopeLen);
          return { x: ox + x * scale, y: oy };
        }
      }

      function draw() {
        ctx.clearRect(0, 0, cw, ch);
        const theta = (slopeAngleDeg * Math.PI) / 180;
        const slopeLen = getSlopeLength();
        const slopeEndX = getSlopeEndX();
        const margin = 80;
        const groundY = ch - 60;
        const scale = Math.min((cw - 2 * margin) / (slopeEndX + 80), (ch - margin - 80) / (startHeight + 40));
        const ox = margin;
        const oy = groundY;

        // Ground and slope (darker gray)
        ctx.strokeStyle = '#4a5568';
        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.beginPath();
        const slopeStart = { x: ox, y: oy - startHeight * scale };
        ctx.moveTo(slopeStart.x, slopeStart.y);
        ctx.lineTo(ox + slopeEndX * scale, oy);
        ctx.lineTo(cw - margin, oy);
        ctx.stroke();

        // Car: rounded body + two wheels, tilted with slope, warm color
        const carLen = 28;
        const carH = 14;
        const wheelRadius = 5;
        const pos = pathToScreen(s);
        const angle = s <= slopeLen ? theta : 0;
        ctx.save();
        ctx.translate(pos.x, pos.y);
        ctx.rotate(angle);
        // Wheels (small circles)
        ctx.fillStyle = '#3d3d3d';
        ctx.beginPath();
        ctx.arc(-carLen / 2 + 4, carH / 2 + 1, wheelRadius, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(carLen / 2 - 4, carH / 2 + 1, wheelRadius, 0, Math.PI * 2);
        ctx.fill();
        // Body (rounded rectangle, warm orange)
        const r = 4;
        const bx = -carLen / 2 + r;
        const by = -carH / 2 - wheelRadius;
        const bw = carLen - 2 * r;
        const bh = carH + wheelRadius - 2;
        ctx.fillStyle = '#d97b4a';
        ctx.beginPath();
        ctx.moveTo(bx + r, by);
        ctx.lineTo(bx + bw - r, by);
        ctx.quadraticCurveTo(bx + bw, by, bx + bw, by + r);
        ctx.lineTo(bx + bw, by + bh - r);
        ctx.quadraticCurveTo(bx + bw, by + bh, bx + bw - r, by + bh);
        ctx.lineTo(bx + r, by + bh);
        ctx.quadraticCurveTo(bx, by + bh, bx, by + bh - r);
        ctx.lineTo(bx, by + r);
        ctx.quadraticCurveTo(bx, by, bx + r, by);
        ctx.fill();
        ctx.restore();
      }

      function updateReadout() {
        speedText.textContent = 'Speed: ' + Math.abs(v).toFixed(2) + ' m/s (ÈÄüÂ∫¶)';
        distanceText.textContent = 'Distance: ' + totalDistance.toFixed(2) + ' m (Ë∑ùÁ¶ª)';
      }

      function step(t) {
        if (!lastTime) lastTime = t;
        const dt = Math.min((t - lastTime) / 1000, 0.05);
        lastTime = t;

        if (!running || v <= 0 && s > getSlopeLength()) {
          if (running && v <= 0 && s > getSlopeLength()) running = false;
          draw();
          updateReadout();
          requestAnimationFrame(step);
          return;
        }

        const slopeLen = getSlopeLength();
        const theta = (slopeAngleDeg * Math.PI) / 180;

        const dtt = dt * VISUAL_TIME_SCALE;
        if (s <= slopeLen) {
          const acc = g * Math.sin(theta) - mu * g * Math.cos(theta);
          v += acc * dtt;
          s += v * dtt;
          if (s > slopeLen) {
            const over = s - slopeLen;
            s = slopeLen;
            v = Math.max(0, v);
            s += v * (over / (v || 1)) * 0.5;
          }
        } else {
          const acc = -mu * g;
          v += acc * dtt;
          if (v < 0) v = 0;
          s += v * dtt;
        }

        totalDistance = s;
        draw();
        updateReadout();
        requestAnimationFrame(step);
      }

      function reset() {
        running = false;
        s = 0;
        v = 0;
        totalDistance = 0;
        lastTime = 0;
        draw();
        updateReadout();
        btnStart.textContent = 'Start (ÂºÄÂßã)';
      }

      function start() {
        if (running) return;
        running = true;
        lastTime = 0;
        btnStart.textContent = 'Running‚Ä¶ (ËøêË°å‰∏≠‚Ä¶)';
        requestAnimationFrame(step);
      }

      function applySuperSlide() {
        slopeAngleDeg = 42;
        mu = 0.03;
        startHeight = 100;
        slopeInput.value = slopeAngleDeg;
        frictionInput.value = mu;
        heightInput.value = startHeight;
        slopeVal.textContent = slopeAngleDeg + '¬∞';
        frictionVal.textContent = mu.toFixed(2);
        heightVal.textContent = startHeight + ' m';
        reset();
        start();
      }

      const btnSuper = document.getElementById('btn-super');
      btnSuper.addEventListener('click', applySuperSlide);

      slopeInput.addEventListener('input', function () {
        slopeAngleDeg = Number(slopeInput.value);
        slopeVal.textContent = slopeAngleDeg + '¬∞';
        if (!running) draw();
      });
      frictionInput.addEventListener('input', function () {
        mu = Number(frictionInput.value);
        frictionVal.textContent = mu.toFixed(2);
        if (!running) draw();
      });
      heightInput.addEventListener('input', function () {
        startHeight = Number(heightInput.value);
        heightVal.textContent = startHeight + ' m';
        if (!running) draw();
      });
      btnStart.addEventListener('click', start);
      btnReset.addEventListener('click', reset);

      draw();
      updateReadout();
    })();
  </script>
</body>
</html>
